<html lang="en">
<head>
<title>AArch64 - Debugging with GDB</title>
<meta http-equiv="Content-Type" content="text/html">
<meta name="description" content="Debugging with GDB">
<meta name="generator" content="makeinfo 4.8">
<link title="Top" rel="start" href="index.html#Top">
<link rel="up" href="Architectures.html#Architectures" title="Architectures">
<link rel="next" href="i386.html#i386" title="i386">
<link href="http://www.gnu.org/software/texinfo/" rel="generator-home" title="Texinfo Homepage">
<!--
Copyright (C) 1988-2023 Free Software Foundation, Inc.

Permission is granted to copy, distribute and/or modify this document
under the terms of the GNU Free Documentation License, Version 1.3 or
any later version published by the Free Software Foundation; with the
Invariant Sections being ``Free Software'' and ``Free Software Needs
Free Documentation'', with the Front-Cover Texts being ``A GNU Manual,''
and with the Back-Cover Texts as in (a) below.

(a) The FSF's Back-Cover Text is: ``You are free to copy and modify
this GNU Manual.  Buying copies from GNU Press supports the FSF in
developing GNU and promoting software freedom.''
-->
<meta http-equiv="Content-Style-Type" content="text/css">
<style type="text/css"><!--
  pre.display { font-family:inherit }
  pre.format  { font-family:inherit }
  pre.smalldisplay { font-family:inherit; font-size:smaller }
  pre.smallformat  { font-family:inherit; font-size:smaller }
  pre.smallexample { font-size:smaller }
  pre.smalllisp    { font-size:smaller }
  span.sc    { font-variant:small-caps }
  span.roman { font-family:serif; font-weight:normal; } 
  span.sansserif { font-family:sans-serif; font-weight:normal; } 
--></style>
</head>
<body>
<div class="node">
<p>
<a name="AArch64"></a>
Next:&nbsp;<a rel="next" accesskey="n" href="i386.html#i386">i386</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="Architectures.html#Architectures">Architectures</a>
<hr>
</div>

<h4 class="subsection">21.4.1 AArch64</h4>

<p><a name="index-AArch64-support-1701"></a>
When <span class="sc">gdb</span> is debugging the AArch64 architecture, it provides the
following special commands:

     <dl>
<dt><code>set debug aarch64</code><dd><a name="index-set-debug-aarch64-1702"></a>This command determines whether AArch64 architecture-specific debugging
messages are to be displayed.

     <br><dt><code>show debug aarch64</code><dd>Show whether AArch64 debugging messages are displayed.

   </dl>

<h5 class="subsubsection">21.4.1.1 AArch64 SVE.</h5>

<p><a name="index-AArch64-SVE_002e-1703"></a>
When <span class="sc">gdb</span> is debugging the AArch64 architecture, if the Scalable Vector
Extension (SVE) is present, then <span class="sc">gdb</span> will provide the vector registers
<code>$z0</code> through <code>$z31</code>, vector predicate registers <code>$p0</code> through
<code>$p15</code>, and the <code>$ffr</code> register.  In addition, the pseudo register
<code>$vg</code> will be provided.  This is the vector granule for the current thread
and represents the number of 64-bit chunks in an SVE <code>z</code> register.

   <p>If the vector length changes, then the <code>$vg</code> register will be updated,
but the lengths of the <code>z</code> and <code>p</code> registers will not change.  This
is a known limitation of <span class="sc">gdb</span> and does not affect the execution of the
target process.

<h5 class="subsubsection">21.4.1.2 AArch64 Pointer Authentication.</h5>

<p><a name="index-AArch64-Pointer-Authentication_002e-1704"></a><a name="AArch64-PAC"></a>

   <p>When <span class="sc">gdb</span> is debugging the AArch64 architecture, and the program is
using the v8.3-A feature Pointer Authentication (PAC), then whenever the link
register <code>$lr</code> is pointing to an PAC function its value will be masked. 
When GDB prints a backtrace, any addresses that required unmasking will be
postfixed with the marker [PAC].  When using the MI, this is printed as part
of the <code>addr_flags</code> field.

<h5 class="subsubsection">21.4.1.3 AArch64 Memory Tagging Extension.</h5>

<p><a name="index-AArch64-Memory-Tagging-Extension_002e-1705"></a>
When <span class="sc">gdb</span> is debugging the AArch64 architecture, the program is
using the v8.5-A feature Memory Tagging Extension (MTE) and there is support
in the kernel for MTE, <span class="sc">gdb</span> will make memory tagging functionality
available for inspection and editing of logical and allocation tags. 
See <a href="Memory-Tagging.html#Memory-Tagging">Memory Tagging</a>.

   <p>To aid debugging, <span class="sc">gdb</span> will output additional information when SIGSEGV
signals are generated as a result of memory tag failures.

   <p>If the tag violation is synchronous, the following will be shown:

<pre class="smallexample">     Program received signal SIGSEGV, Segmentation fault
     Memory tag violation while accessing address 0x0500fffff7ff8000
     Allocation tag 0x1
     Logical tag 0x5.
</pre>
   <p>If the tag violation is asynchronous, the fault address is not available. 
In this case <span class="sc">gdb</span> will show the following:

<pre class="smallexample">     Program received signal SIGSEGV, Segmentation fault
     Memory tag violation
     Fault address unavailable.
</pre>
   <p>A special register, <code>tag_ctl</code>, is made available through the
<code>org.gnu.gdb.aarch64.mte</code> feature.  This register exposes some
options that can be controlled at runtime and emulates the <code>prctl</code>
option <code>PR_SET_TAGGED_ADDR_CTRL</code>.  For further information, see the
documentation in the Linux kernel.

   <p><span class="sc">gdb</span> supports dumping memory tag data to core files through the
<samp><span class="command">gcore</span></samp> command and reading memory tag data from core files generated
by the <samp><span class="command">gcore</span></samp> command or the Linux kernel.

   <p>When a process uses memory-mapped pages protected by memory tags (for
example, AArch64 MTE), this additional information will be recorded in
the core file in the event of a crash or if <span class="sc">gdb</span> generates a core file
from the current process state.

   <p>The memory tag data will be used so developers can display the memory
tags from a particular memory region (using the `<samp><span class="samp">m</span></samp>' modifier to the
<samp><span class="command">x</span></samp> command, using the <samp><span class="command">print</span></samp> command or using the various
<samp><span class="command">memory-tag</span></samp> subcommands.

   <p>In the case of a crash, <span class="sc">gdb</span> will attempt to retrieve the memory tag
information automatically from the core file, and will show one of the above
messages depending on whether the synchronous or asynchronous mode is selected. 
See <a href="Memory-Tagging.html#Memory-Tagging">Memory Tagging</a>. See <a href="Memory.html#Memory">Memory</a>.

   </body></html>

